{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-6">
    <div class="row">
      <div class="col-xs-12">
        <form action="" method="get" class="form-inline">
          <div class="col-xs-12">
            <div class="form-group">
              <label>
              Zoek <i class="fa fa-search" aria-hidden="true"></i>
              </label>
              <input type="text" class="form-control" name="query" value="" placeholder="Amsterdam">
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <a href="#" id ="btn-location">
          <i class="fa fa-map-marker" aria-hidden="true"></i> Gebruik mijn locatie
        </a>
      </div>
    </div>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-6">
    <div id="map" style="height: 300px;"></div>
  </div>
</div>

<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
  integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
  crossorigin=""></script>
<script>

    var stembureaus = {{ records.records |tojson |safe }};
    var stembureaus_markers = [];

    for(var i=0; i < stembureaus.length; i++) {
      stembureaus_markers.push(
        L.marker(
          [stembureaus[i].Latitude, stembureaus[i].Longitude]
        ).bindPopup(
          "<a href=\"/s/" + stembureaus[i]['ID'] + "\">" + stembureaus[i]['Naam stembureau'] + "</a><p><b>Openingstijden:</b>" + stembureaus[i]['Openingstijden'] + "</p>"
        )
      );
    }


    var layers = {
      'Stembureaus': L.layerGroup(stembureaus_markers)
    };
    var map = L.map('map', {'layers': layers['Stembureaus']}).setView([52.2, 5.592], 6);
    var group = L.featureGroup(stembureaus_markers);
    map.fitBounds(group.getBounds());

    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

</script>
{% endblock %}
